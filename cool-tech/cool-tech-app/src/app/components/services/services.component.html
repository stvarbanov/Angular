<div class="services-wrapper">
    <div class="services">

        <div class="service" *ngFor=" let service of services[0]">
            <div class="img-container">
                <img div-image src={{service.imageUrl}}>
            </div>
            <div class="service-box">
                <h3 class="service-title"> {{service.title}} </h3>
                <span class="service-text">
                    <p>{{service.description}}</p>
                </span>
            </div>
            <div *ngIf="isLoggedAdmin">

                <button class="action-button delete" (click)="deleteService(service._id)">
                    <i class="fa-solid fa-x"></i>
                </button>
                <button class="action-button edit" (click)="editService(service._id)">
                    <i class="fa-solid fa-pen"></i>
                </button>
            </div>
        </div>

    </div>
    <aside *ngIf="isLoggedAdmin && !isUpdating">
        <h3>Admin panel - add service</h3>

        <form #serviceForm="ngForm" (ngSubmit)="onSubmit()">
            <div class="input">
                <input class="form-control" id="title" name="title" ngModel required minlength='5' #title="ngModel"/>
                <label for="title" class="add-title">Service title</label>
                <div class="form-error" *ngIf="title.invalid && title.touched">
                    * Title is mandatory!
                </div>
                <div class="form-error" *ngIf="title.errors?.['minlength']">
                    * Title must be at least 5 symbols!
                </div>
            </div>
            <div class="input">
                <input class="form-control" id="imageUrl" name="imageUrl" ngModel required minlength='5' #imageUrl="ngModel" />
                <label for="imageUrl" class="add-image">Image URL</label>
                <div class="form-error" *ngIf="imageUrl.invalid && imageUrl.touched">
                    * Image URL is mandatory!
                </div>
                <div class="form-error" *ngIf="imageUrl.errors?.['minlength']">
                    * Image URL must be at least 5 symbols!
                </div>
            </div>
            <div class="input">
                <textarea class="form-control" id="description" name="description" ngModel required minlength='5' #description="ngModel"></textarea>
                <label for="description" class="add-text">Description</label>
                <div class="form-error" *ngIf="description.invalid && description.touched">
                    * Description is mandatory!
                </div>
                <div class="form-error" *ngIf="description.errors?.['minlength']">
                    * Description must be at least 5 symbols!
                </div>
            </div>
            <div class="action">
                <div class="action" *ngIf="serviceForm.invalid">
                    <button class="action-button-warn" [disabled]="serviceForm.invalid">Fill all fields</button>
                </div>
                <div class="action" *ngIf="!serviceForm.invalid">
                    <button class="action-button">Add service</button>
                </div>
            </div>
        </form>



    </aside>
    <aside *ngIf="isLoggedAdmin && isUpdating">
        <h3>Edit service</h3>

        <form #editServiceForm="ngForm" (ngSubmit)="onUpdate()">
            <div class="input">
                <input class="form-control" id="title" name="title" ngModel required minlength='5' #title="ngModel"/>
                <label for="title" class="add-title">Service title</label>
                <div class="form-error" *ngIf="title.invalid && title.touched">
                    * Title is mandatory!
                </div>
                <div class="form-error" *ngIf="title.errors?.['minlength']">
                    * Title must be at least 5 symbols!
                </div>
            </div>
            <div class="input">
                <input class="form-control" id="imageUrl" name="imageUrl" ngModel required minlength='5' #imageUrl="ngModel" />
                <label for="imageUrl" class="add-image">Image URL</label>
                <div class="form-error" *ngIf="imageUrl.invalid && imageUrl.touched">
                    * Image URL is mandatory!
                </div>
                <div class="form-error" *ngIf="imageUrl.errors?.['minlength']">
                    * Image URL must be at least 5 symbols!
                </div>
            </div>
            <div class="input">
                <textarea class="form-control" id="description" name="description" ngModel required minlength='5' #description="ngModel"></textarea>
                <label for="description" class="add-text">Description</label>
                <div class="form-error" *ngIf="description.invalid && description.touched">
                    * Description is mandatory!
                </div>
                <div class="form-error" *ngIf="description.errors?.['minlength']">
                    * Description must be at least 5 symbols!
                </div>
            </div>
            <div class="action">
                <button class="action-button">Update </button>
                <button class="action-button" onclick="abortUpdate()">Cancel</button>
            </div>
        </form>



    </aside>
</div>